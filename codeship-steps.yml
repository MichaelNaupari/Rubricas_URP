- type: serial
  steps:
  - type: parallel
    steps:
      # Run the linter
      - service: frontend
        command: ng lint
      # Run the tests
      - service: frontend
        command: ng test --browsers Chrome_no_sandbox --watch false
      # Run e2e tests
      - service: frontend
        command: ng e2e
      # Ensure AOT build works
      - service: frontend
        command: ng build --prod --aot true
  # Push test coverage to Coveralls
  - service: frontend
    command: ng test --watch=false --code-coverage --browsers Chrome_no_sandbox && cat ./coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js
  # Deploy to master via CDN
  - service: cdn-prod-deployer
    command: bash /docker/execute.sh
    tag: master
