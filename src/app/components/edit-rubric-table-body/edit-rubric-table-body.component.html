<hr>

<ng-container *ngIf="rubric">
    <div class="component-wrapper" valign="top" *ngFor="let component of rubric.components; let i = index">
        <div class="component-input-col" [ngStyle]="componentWidth()">
            <div class="level-actions form-group">
                <button class="btn-sm btn-danger oi oi-x" aria-label="Remove Component" (click)="removeComponent(i)"></button>
            </div>
            <div class="form-group">
                <label for="component-{{ i + 1 }}-name">
                    Component {{ i + 1 }} Name<span class="text-danger">*</span>
                </label>
                <input
                        id="component-{{ i + 1 }}-name"
                        type="text"
                        class="form-control form-control-sm"
                        [(ngModel)]="component.name"
                        (ngModelChange)="updateRubric()"
                        required
                />
            </div>
            <div class="form-group">
                <label for="component-{{ i + 1 }}-description">Description</label>
                <textarea
                        id="component-{{ i + 1 }}-description"
                        class="form-control form-control-sm"
                        [(ngModel)]="component.description"
                        (ngModelChange)="updateRubric()"
                ></textarea>
            </div>
        </div>
        <div *ngFor="let level of component.levels; let j = index" [ngStyle]="componentWidth()" class="level-wrapper">
            <div class="level-actions form-group">
                <button class="btn-sm btn-success oi oi-plus" aria-label="Add Level" (click)="addLevel(i, j + 1)"></button>
                <button class="btn-sm btn-danger oi oi-x" aria-label="Remove Level" (click)="removeLevel(i, j)"></button>
            </div>
            <div class="form-group">
                <label for="component-{{ i + 1 }}-level-{{ j + 1 }}-score">
                    Score<span class="text-danger">*</span>
                </label>
                <input
                        id="component-{{ i + 1 }}-level-{{ j + 1 }}-score"
                        type="number"
                        class="form-control form-control-sm"
                        [(ngModel)]="level.score"
                        (ngModelChange)="updateRubric()"
                        required
                />
            </div>
            <div class="form-group">
                <label for="component-{{ i + 1 }}-level-{{ j + 1 }}-label">Label</label>
                <input
                        id="component-{{ i + 1 }}-level-{{ j + 1 }}-label"
                        type="text"
                        class="form-control form-control-sm"
                        [(ngModel)]="level.label"
                        (ngModelChange)="updateRubric()"
                />
            </div>
            <div class="form-group">
                <label for="component-{{ i + 1 }}-level-{{ j + 1 }}-description">Description</label>
                <textarea
                        id="component-{{ i + 1 }}-level-{{ j + 1 }}-description"
                        class="form-control form-control-sm"
                        [(ngModel)]="level.description"
                        (ngModelChange)="updateRubric()"
                ></textarea>
            </div>
        </div>
        <div *ngFor="let emptyElement of emptyElements(component)"></div>
    </div>
</ng-container>
